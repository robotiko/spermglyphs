<html>
<head>
    <script src="assets/js/lib/jquery.min.js"></script>
    <script src="assets/js/lib/raphael-min.js"></script>
    <script src="assets/js/lib/d3.v3.min.js"></script>
    <script src="assets/js/lib/colorbrewer.js"></script>
    <script src="assets/js/lib/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap-select.js"></script>
    <script src="http://designmodo.github.io/Flat-UI/js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="assets/js/lib/handlebars.js"></script>
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/treelines-font.css" rel="stylesheet" type="text/css"/>
</head>
<body>

<div>
    <div class="ft-header" align="center">
        <p>File<span style="font-weight: lighter">Trajectory</span></p>
        <!--<p>Fsty</p>-->
    </div>
    <div id="header" class="pull-left" style=""></div>
</div>

<div id="breadcrumbs" class="pull-left" style="margin-left: 240px; margin-top: -110px">
    <ul id="breadcrumb-list">
        <li class="active" id="everything">Everything</li>
    </ul>
</div>


<div id="time-filter-container" class="pull-left">
    <div class="icon-clock"></div>
</div>
<div class="pull-left" style="margin-left: 280px; margin-top: -50px; ">
    <div id="visualization-map" style="height: 830px"></div>
    <div><span style="font-size: 1.2em; width: 100%; color: #D25627;">Daily Access Overview</span>

        <div id="timeline-overview"></div>
    </div>
</div>


<div class="table-view">
    <div class="table-context">
        <select id="table-context-switch-select" name="metatype-list" class="select-block"
                style="display: none; margin-left: -15px" onchange="switchList()">

        </select>

        <select class="target select-block" name="type-list">
            <option value="dropbox" selected="selected">Dropbox</option>
            <option value="git">Git</option>
            <option value="osx">OS X</option>
            <option value="sec">Security</option>
        </select>

    </div>

    <div class="table-search">
        <label for="colourMap" style="font-weight: lighter">Colour map?</label>
        <input type="checkbox" name="colourMap" id="colourMap" class="pull-right" style="margin-right: 15px"/>
    </div>

    <div class="width-field">
        <span class="pull-left" style="font-weight: lighter">Width</span>

        <div id="slider" class="ui-slider">
        </div>
        <!--<input type="range" name="width" id="width" min="800" max="1200" value="800">-->
    </div>

    <div class="events">
        <p style="margin-left: 10px; font-weight: bolder; margin-top: 10px">Filter Events</p>
        <ul id="event-list">
            <div class="windows8">
                <div class="wBall" id="wBall_1">
                    <div class="wInnerBall">
                    </div>
                </div>
                <div class="wBall" id="wBall_2">
                    <div class="wInnerBall">
                    </div>
                </div>
                <div class="wBall" id="wBall_3">
                    <div class="wInnerBall">
                    </div>
                </div>
                <div class="wBall" id="wBall_4">
                    <div class="wInnerBall">
                    </div>
                </div>
                <div class="wBall" id="wBall_5">
                    <div class="wInnerBall">
                    </div>
                </div>
            </div>
        </ul>
    </div>

    <!--<div class="overview">-->
    <!--<div class="fs-overview-header">-->
    <!--<p style="margin-left: 10px; margin-top: 10px">Activity Overview</p>-->
    <!--</div>-->

    <!--<div id="fs-trajectory"></div>-->
    <!--</div>-->

</div>

<div id="popup" class="popup hidden">
    <div class="popup-header"><span id="event-type" class="pull-left">edit</span> <span id="event-time" class="pull-right">24/02/2014 2:45pm</span></div>
    <div class="clearfix"></div>
    <div id="file_details">
        <div id="file_parent">
            <span id="file_parent_text">Location</span><br/>
            <span id="file_parent_value">/users/eamonnmaguire/file/</span><br/>
        </div>

        <div id="file_name">
            <span id="file_name_text">File Name</span><br/>
            <span id="file_name_value">file.txt</span><br/>
        </div>

        <div id="file_type">
            <span id="file_type_text">Type</span><br/>
            <span id="file_type_value">Plain Text</span><br/>
        </div>
    </div>
    <div class="history">

        <div align="center">
            <div class="icon-clock"></div>
        </div>

        <div class="clearfix"></div>

        <div id="recent-history">
            <ul>
                <li id="1">
                    <div id="user-event" align="center">
                        <span class="glyphicon glyphicon-user" style="color: #D25627"></span><span class="glyphicon glyphicon-asterisk" style="color: #414241"></span>
                    </div>
                    <div id="size">
                        22kb
                    </div>
                    <div id="changes">
                        <div class="file_change deletion"><span class="glyphicon glyphicon-minus"></span></div>
                        <div class="file_change addition"><span class="glyphicon glyphicon-plus"></span></div>
                    </div>
                    <div class="clearfix"></div>

                    <div id="time_of_event">
                        20/01/2014<br/>
                        2:35PM
                    </div>
                </li>
                <li id="2">
                    <div id="user-event" align="center">
                        <span class="glyphicon glyphicon-user" style="color: #27AAE1"></span><span class="glyphicon glyphicon-asterisk" style="color: #414241"></span>
                    </div>
                    <div id="size">
                        20kb
                    </div>
                    <div id="changes">
                        <div class="file_change deletion"><span class="glyphicon glyphicon-minus"></span></div>
                        <div class="file_change deletion"><span class="glyphicon glyphicon-minus"></span></div>
                    </div>
                    <div class="clearfix"></div>

                    <div id="time_of_event">
                        20/01/2014<br/>
                        2:55PM
                    </div>
                </li>
                <li id="3">
                    <div id="user-event" align="center">
                        <span class="glyphicon glyphicon-user" style="color: #39B54A"></span><span class="glyphicon glyphicon-asterisk" style="color: #414241"></span>
                    </div>
                    <div id="size">
                        24kb
                    </div>
                    <div id="changes">
                        <div class="file_change addition"><span class="glyphicon glyphicon-plus"></span></div>
                        <div class="file_change addition"><span class="glyphicon glyphicon-plus"></span></div>
                        <div class="file_change addition"><span class="glyphicon glyphicon-plus"></span></div>
                    </div>
                    <div class="clearfix"></div>

                    <div id="time_of_event">
                        20/01/2014<br/>
                        4:42PM
                    </div>
                </li>
            </ul>
        </div>

        <div class="clearfix"></div>

    </div>
</div>

<!--<a href="javascript:toggleView();" class="table-option table-hide"><span-->
<!--class="glyphicon glyphicon-chevron-left"></span></a>-->

<script id="event-list-template" type="text/x-handlebars-template">
    {{#each events}}
    <li class="select {{this.className}}" onclick="javascript:toggleItemVisible('{{this.type}}')">
        <div class="event-icon fui-user"></div>
        <div class="event-content">
            <h4 class="event-name">
                {{this.type}}
            </h4>
            {{this.count}} occurrences
        </div>
    </li>
    {{/each}}
</script>

<script src="assets/js/main.js"></script>
<script src="assets/js/glyphHandlers.js"></script>
<!--<script src="assets/js/TrajectoryPlot.js"></script>-->
<script src="assets/js/TimelineOverview.js"></script>


<script>
    $("select[name='type-list']").selectpicker({style: 'btn-primary', menuStyle: 'dropdown-inverse'});
    var $slider = $("#slider");
    if ($slider.length) {
        $slider.slider({
            min: 800,
            max: 1400,
            value: 1200,
            orientation: "horizontal",
            range: "min",
            change: function (event, ui) {
                width = ui.value;
                FileTrajectory.vis.run($("select option:selected").val());
            }
        });
    }

    $(".events").on('click', 'li', function () {
        $(this).toggleClass("event-selected");
    });

    function toggleItemVisible(type) {
        if (allowedEvents.indexOf(type) != -1) {
            allowedEvents.splice(allowedEvents.indexOf(type), 1);
            if (type === "mount") {
                allowedEvents.splice(allowedEvents.indexOf("unmount"), 1);
            }
            if (type === "unmount") {
                allowedEvents.splice(allowedEvents.indexOf("mount"), 1);
            }

        } else {
            allowedEvents.push(type);
            if (type === "mount") {
                allowedEvents.push("unmount");
            }
            if (type === "unmount") {
                allowedEvents.push("mount");
            }
        }
        FileTrajectory.vis.run($("select option:selected").val());
    }


    $('#breadcrumb-list').on('click', 'li', function () {
        var id = $(this).attr("id");
        var indexToStartRemovalFrom = breadcrumbs.indexOf(id);
        breadcrumbs.splice(indexToStartRemovalFrom + 1, breadcrumbs.length - indexToStartRemovalFrom);

        $("#breadcrumb-list").html("");
        var className = breadcrumbs.length == 0 ? "active" : "";
        console.log(breadcrumbs.length);
        console
        $("#breadcrumb-list").append('<li class="' + className + '" id="everything">Everything</li>');
        for (var index in breadcrumbs) {
            className = index == breadcrumbs.length - 1 ? "active" : "";
            $("#breadcrumb-list").append('<li class="' + className + '" id="' + breadcrumbs[index] + '">' + breadcrumbs[index] + '</li>');
        }
        FileTrajectory.vis.run($("select option:selected").val());


    })


</script>

</body>
</html>
